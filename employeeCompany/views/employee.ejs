<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
    <table class="table table-striped">
        <caption>Employees list</caption>
        <thead>
            <tr>
                <% for (let i of Object.keys(JSON.parse(JSON.stringify(data[0])))) { %>
                    <th><%= i %></th>
                <% } %>
            </tr>
        </thead>
        <tbody>
            <% for (let i of data) { %>
                <tr>
                <% const keyVals = Object.entries(JSON.parse(JSON.stringify(i))) %>
                <% for (let j of keyVals) { %>
                    <% if (j[0] == "company") { %>
                        <td><%= j[1].name %></td>
                        <% continue %>
                    <% } %>
                    <td><%= j[1] %></td>
                <% } %>
                </tr>
            <% } %>
        </tbody>
    </table>

    <div id = "crud">
        <form id="create-employee">
            <label for="employee-firstName">firstName</label>
            <input type="text" id="employee-firstName" minlength="3" maxlength="30" required>
            <br>
            <label for="employee-lastName">lastName</label>
            <input type="text" id="employee-lastName" minlength="3" maxlength="30" required>
            <br>
            <label for="employee-gender">gender</label>
            <select id="employee-gender" value="not-set" selected>
                <option value="male">male</option>
                <option value="female">female</option>
                <option value="not-set">not-set</option>
            </select>
            <label for="employee-birth">birth</label>
            <input type="date" id="employee-birth">
            <br>
            <label for="employee-phoneNumber">phoneNumber</label>
            <input type="tel" id="employee-phoneNumber" pattern="^(\+98)9\d{9}$" required>
            <br>
            <label for="employee-city">city</label>
            <input type="text" id="employee-city" minlength="3" maxlength="30" required>
            <br>
            <label for="employee-position">position</label>
            <select id="employee-position" value="not-set" selected>
                <option value="manager">manager</option>
                <option value="employee">employee</option>
            </select>
            <input type="submit" value="Create Employee">
        </form>
    
        <form id="update-employee">
            <label for="update-employee-firstName"></label>
            <input type="text" id="update-employee-firstName" placeholder="firstName" minlength="3" maxlength="30">
            <br>
            <label for="update-employee-lastName"></label>
            <input type="text" id="update-employee-lastName" placeholder="lastName" minlength="3" maxlength="30">
            <br>
            <select id="update-employee-gender" value="not-set" placeholder="gender" selected>
                <option value="male">male</option>
                <option value="female">female</option>
                <option value="not-set">not-set</option>
            </select>
            <label for="update-employee-birth"></label>
            <input type="date" id="update-employee-birth">
            <br>
            <label for="update-employee-phoneNumber"></label>
            <input type="tel" id="update-employee-phoneNumber" placeholder="phoneNumber" pattern="^(\+98)9\d{9}$">
            <br>
            <label for="update-employee-city"></label>
            <input type="text" id="update-employee-city" placeholder="city" minlength="3" maxlength="30">
            <br>
            <select id="update-employee-position" value="not-set" selected>
                <option value="manager">manager</option>
                <option value="employee">employee</option>
            </select>
            <input type="submit" value="Update Employee">
        </form>
    
        <button id="delete-employee">Delete Employee</button>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/javascripts/employee.js"></script>
</body>
</html>